#include <stdlib.h>

#include <vm.h>

#test test_load_pc
    struct virtual_machine *jolly;
    jolly = new_vm();
    jolly->memory = (WORD *)malloc(MAX_MEMORY_SIZE);
    if(jolly->memory == NULL){
        fail();
    }
    jolly->memory[PC_HIGH_ADDRESS] = 0x0;
    jolly->memory[PC_MIDDLE_ADDRESS] = 0x42;
    jolly->memory[PC_LOW_ADDRESS] = 0x10;

    load_pc(jolly);
    fail_unless(pc_address(jolly) == 0x004210);